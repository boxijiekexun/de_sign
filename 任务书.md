# 🎶 音乐节演出调度系统 - 项目任务计划书 (Final Version)

**1. 项目使命与核心理念**

* **项目名称：** 音乐节演出调度系统 (Music Festival Scheduler)
* **使命宣言：** 构建一个高效、可靠的后台调度核心，通过集成 Java 高级数据结构，优化多艺人、多舞台的演出排期，并实现对核心业务指标（如人气排名、时间冲突和粉丝提醒）的实时管理。
* **核心理念：**
    * **结构集成：** 巧妙地将**哈希表**、**双向链表**和**优先队列**进行集成，以支持复杂业务逻辑。
    * **效率优先：** 利用哈希表 (`artistSchedule`) 实现 O(1) 艺人档期快速查询，利用优先队列实现 O(logN) 动态排序和提醒处理。
    * **冲突规避：** 核心功能是演出时间的冲突检测和顶流艺人错峰调度。
    * **API驱动：** 完全使用 Java 标准库实现所有数据结构和逻辑。

**2. 技术栈与架构**

* **核心后端 (Java)：**
    * **语言：** Java
    * **核心库：** 无外部依赖，仅使用标准库 (`java.util.PriorityQueue`, `java.util.HashMap`, `java.util.List` 等)。
* **系统架构：**
    1.  **数据模型层 (Entity)：** 纯数据对象，如 `Artist`, `TimeSlot`, `Performance`。
    2.  **数据结构核心层 (Core Structure)：** 包含 `DoublyLinkedList` 和封装所有核心集合的 `MusicFestivalScheduler`。
    3.  **应用层 (Application)：** `MainApp` 演示类，通过命令行接口 (CLI) 风格进行功能验证和展示。

---

**3. 核心功能与开发任务分解**

#### **第一阶段：数据模型与核心结构构建**

**任务 1.1：数据模型定义**
* `Artist.java`: 艺人实体类，包含 `name`, `genre`（风格）和 `popularity`（人气值）。实现 `Comparable` 接口，用于构建**人气降序的 Max Heap**。
* `TimeSlot.java`: 演出时间段实体，包含 `startTime` 和 `endTime`（小时数）。实现 **`conflictsWith()`** 方法以判断两个时间段是否重叠。
* `Performance.java`: 演出场次实体，包含 `Artist` 和 `TimeSlot`，并作为双向链表的节点（带有 `prev`/`next` 指针）。
* `FanReminder` (内部类): 粉丝提醒对象，包含粉丝ID、演出场次和 `reminderTime`。实现 `Comparable` 接口，用于构建**提醒时间升序的 Min Heap**。

**任务 1.2：中央调度器实现 (`MusicFestivalScheduler`)**
* **核心数据结构初始化：** 在构造函数中完成对 `DoublyLinkedList` (时间轴)、`PriorityQueue<Artist>` (热度榜)、`Map<String, Performance>` (档期哈希) 和 `PriorityQueue<FanReminder>` (提醒队列) 的初始化。
* `addPerformance()`: 封装数据录入逻辑，确保同步更新全部三个核心数据结构。

#### **第二阶段：核心业务逻辑实现与调度**

**任务 2.1：时间轴调度与冲突检测 (双向链表)**
* `DoublyLinkedList.checkConflict()`: 在插入演出前，遍历链表检查新的演出场次是否与任何已有演出发生时间冲突。
* `DoublyLinkedList.swapPerformance(p1, p2)`: 实现时间轴上任意两场演出场次的**临时调换功能**（通过移除和重新插入节点的方式实现逻辑调换）。
* `MusicFestivalScheduler.getPerformanceByArtistName()`: 实现根据艺人姓名利用哈希表 **O(1) 快速检索**对应的演出场次。

**任务 2.2：查询与排位功能 (优先队列/哈希表)**
* `MusicFestivalScheduler.getHotArtistsRanking(n)`: 利用优先队列的排序特性，获取人气最高的 **Top N 艺人热度榜**。
* `MusicFestivalScheduler.findArtistGenre(artistName)`: 利用哈希表快速定位艺人演出，实现**艺人特长风格的快速匹配**查询。

**任务 2.3：粉丝提醒管理 (优先队列)**
* `MusicFestivalScheduler.addFanReminder()`: 接收粉丝ID、艺人姓名和提醒时间，创建提醒对象并添加到时间优先队列。
* `MusicFestivalScheduler.processReminders(currentTime)`: 模拟系统心跳，实时处理并从队列中取出（`poll`）所有到达提醒时间的预约通知。

#### **第三阶段：应用演示与最终验证**

**任务 3.1：构建命令行接口 (CLI 演示)**
* `MainApp.java`: 实现主应用类，作为系统的 CLI 演示界面。
* **演示流程：**
    1.  初始化并录入多场演出数据，演示多结构联动。
    2.  演示因时间重叠导致的**冲突检测失败场景**。
    3.  调用并打印 **人气热度榜 (Top N)** 结果。
    4.  演示 **演出时间轴临时调换** 功能，并打印调换后的时间轴。
    5.  演示 **粉丝提醒** 的设置和随时间推进的实时处理流程。

**任务 3.2：最终验证**
* 验证四个核心数据结构能够正确协同工作，完成排期、排序、查询和提醒的核心业务。